{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nexport const fetchImagesPixabay = (query, page) => {\n  const searchParams = {\n    key: '47642074-633fbcdbc226b1edbeb1e203e',\n    q: `${query}`,\n    orientation: 'horizontal',\n    image_type: 'photo',\n    safesearch: 'true',\n    page: `${page}`,\n    per_page: 15,\n  };\n\n  return axios.get('https://pixabay.com/api/', {params: searchParams});\n}\n\n","const imageCardsTemplate = imageArray => {\n  return imageArray\n    .map(el => {\n      return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${el.webformatURL}\"\n            data-source=\"${el.largeImageURL}\"\n            alt=\"${el.tags}\"\n          />\n        </a>\n        <div class=\"image-notes\">\n          <div class=\"image-notes-tabs\">\n            <p class=\"notes-text\">Likes</p>\n            <p>${el.likes}</p>\n          </div>\n          <div class=\"image-notes-tabs\">\n            <p class=\"notes-text\">Views</p>\n            <p>${el.views}</p>\n          </div>\n          <div class=\"image-notes-tabs\">\n            <p class=\"notes-text\">Comments</p>\n            <p>${el.comments}</p>\n          </div>\n          <div class=\"image-notes-tabs\">\n            <p class=\"notes-text\">Downloads</p>\n            <p>${el.downloads}</p>\n          </div>\n        </div>\n      </li>`\n  })\n    .join(\"\")\n}\n\nexport const imageInsert = () => {\n  const gallery = document.querySelector(\".gallery\");\n\n  return {\n    add(imageArray) {\n      gallery.innerHTML = imageCardsTemplate(imageArray);\n    },\n    addAdjacent(imageArray) {\n      gallery.insertAdjacentHTML('beforeend', imageCardsTemplate(imageArray))\n    },\n    reset() {\n      gallery.innerHTML = '';\n    }\n  };\n}\n\n\n","import { fetchImagesPixabay } from \"./js/pixabay-api.js\"\nimport {imageInsert} from './js/render-functions.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchFormEl = document.querySelector(\".search-form\");\nconst loadMoreBtn = document.querySelector('.load-more-btn')\n\nconst box = new SimpleLightbox('.gallery a');\nconst loader = document.querySelector('.loader');\nconst galleryModule = imageInsert();\n\nlet userQuery = '';\nlet page = 1;\nconst perPage = 15;\nlet scrollHeight = 0;\n\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n    galleryModule.reset();\n    page = 1;\n    loader.classList.remove('is-hidden');\n    if (!loadMoreBtn.classList.contains('is-hidden')) {\n      loadMoreBtn.classList.add('is-hidden');\n    }\n    userQuery = searchFormEl.elements.input.value.trim();\n    const response = await fetchImagesPixabay(userQuery, page);\n\n    if (response.data.hits.length === 0) {\n      iziToast.show({\n        color: 'red',\n        position: 'topLeft',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      })\n      return;\n    }\n\n    galleryModule.add(response.data.hits);\n    box.refresh();\n\n    const galleryItem = document.querySelector('.gallery-item');\n    scrollHeight = galleryItem.getBoundingClientRect().height;\n\n    loadMoreBtn.classList.remove('is-hidden');\n    loadMoreBtn.addEventListener('click', onLoadMoreClick);\n\n  } catch (err) {\n    console.log(err);\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nconst onLoadMoreClick = async event => {\n  try {\n    page++;\n    loadMoreBtn.classList.add('is-hidden');\n    loader.classList.remove('is-hidden');\n\n    const response = await fetchImagesPixabay(userQuery, page);\n\n    galleryModule.addAdjacent(response.data.hits);\n    box.refresh();\n    if (response.data.totalHits < page * perPage) {\n      iziToast.show({\n        color: 'yellow',\n        position: 'topLeft',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n      return;\n    }\n    loadMoreBtn.classList.remove('is-hidden');\n\n  } catch (err) {\n    console.log(err)\n  } finally {\n    loader.classList.add('is-hidden');\n    window.scrollBy({\n      top: (scrollHeight * 2),\n      behavior: \"smooth\",\n    });\n  }\n}\n"],"names":["fetchImagesPixabay","query","page","searchParams","axios","imageCardsTemplate","imageArray","el","imageInsert","gallery","searchFormEl","loadMoreBtn","box","SimpleLightbox","loader","galleryModule","userQuery","perPage","scrollHeight","onSearchFormSubmit","event","response","iziToast","onLoadMoreClick","err"],"mappings":"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"}